(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{8154:function(t,e,n){Promise.resolve().then(n.bind(n,4801))},1552:function(t,e,n){"use strict";var o=n(7437);n(2265),e.Z=function(){return(0,o.jsx)("div",{className:"w-full h-screen flex justify-center items-center",children:(0,o.jsx)("h3",{className:"text-3xl",children:"Loading..."})})}},4801:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var o=n(7437),a=n(2265),s=n(7447),r=function(t){let{userId:e}=t,[n,r]=(0,a.useState)(""),[i,c]=(0,a.useState)("");return console.log("post data: ",i),(0,a.useEffect)(()=>{let t=new Date;console.log(t);let n={data:{type:"taxonomy_term--users_database",attributes:{status:!0,name:e,description:{value:"<p>User logged in Id</p>",format:"basic_html",processed:"<p>User logged in Id</p>"},field_date:function(t){let e=t.getUTCFullYear(),n=String(t.getUTCMonth()+1).padStart(2,"0"),o=String(t.getUTCDate()).padStart(2,"0"),a=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0"),r=String(t.getUTCSeconds()).padStart(2,"0"),i=t.getTimezoneOffset();return"".concat(e,"-").concat(n,"-").concat(o,"T").concat(a,":").concat(s,":").concat(r).concat(i>=0?"-":"+").concat(String(Math.floor(Math.abs(i)/60)).padStart(2,"0"),":").concat(String(Math.abs(i)%60).padStart(2,"0"))}(t)}}};c(n)},[n,e]),(0,o.jsx)("form",{className:"w-60",onSubmit:t=>{t.preventDefault(),(0,s.v)(i,"/jsonapi/taxonomy_term/users_database")},children:(0,o.jsx)("button",{className:"mt-5",children:"Register"})})},i=n(2333),c=n(9505),l=n(1552);let d=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return fetch(...e).then(t=>t.json())};var u=function(){var t,e;let n=c.g.URL+"/jsonapi",{data:s,error:u,isLoading:p}=(0,i.ZP)(n,d),[g,f]=(0,a.useState)("");console.log("Logged in - UserId - ",g),(0,a.useEffect)(()=>{var t,e,n,o;f(s&&(null==s?void 0:null===(o=s.meta)||void 0===o?void 0:null===(n=o.links)||void 0===n?void 0:null===(e=n.me)||void 0===e?void 0:null===(t=e.meta)||void 0===t?void 0:t.id))},[s]);let v=c.g.URL+"/jsonapi/taxonomy_term/users_database",{data:m,error:h,isLoading:S}=(0,i.ZP)(v,d);console.log("Userdata: ",m),console.log("userdata - userId",null==m?void 0:null===(e=m.data[0])||void 0===e?void 0:null===(t=e.attributes)||void 0===t?void 0:t.name);let[j,U]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{var t;let e=m&&(null==m?void 0:null===(t=m.data)||void 0===t?void 0:t.some(t=>t.attributes.name===g));console.log("User Id check ?",e),e?U(!0):U(!1)},[m,g]),p)?(0,o.jsx)(l.Z,{}):(0,o.jsx)("div",{className:"flex justify-center mt-20",children:j?(0,o.jsx)("div",{children:"Registered user"}):(0,o.jsx)(r,{userId:g})})}},9505:function(t,e,n){"use strict";n.d(e,{g:function(){return o}});let o={URL:"https://tuition.yellow-website.com/cms"}},7447:function(t,e,n){"use strict";n.d(e,{v:function(){return s}});var o=n(9222),a=n(9505);let s=async(t,e)=>{console.log("data in post function: ",t);try{let n=await (0,o.Z)({method:"GET",url:a.g.URL+"/session/token",headers:{Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}});console.log(n.data);try{let s=await (0,o.Z)({method:"POST",url:"".concat(a.g.URL).concat(e),headers:{Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json","X-CSRF-Token":n.data},data:t});return console.log("Post done: ",s),201===s.status&&window.location.replace("/report/postsuccess"),s}catch(t){console.log("Post Error: ",t)}}catch(t){console.log("Session token error: ",t)}}}},function(t){t.O(0,[801,222,971,596,744],function(){return t(t.s=8154)}),_N_E=t.O()}]);